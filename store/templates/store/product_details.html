{% extends "base.html" %}
{% block content %}
<div>
    <a href="{% url 'store:product_list' %}" class="text-muted small">← Back</a>
    <h1>{{ product.name }}</h1>

    {% if product.image %}
    <img src="{{ product.image.url }}" alt="{{ product.name }}" style="max-width:300px;">
    {% endif %}

    <p>{{ product.description }}</p>
    <p><strong>Price:</strong> £{{ product.price }}</p>

    {% if product.variants.exists %}
    <h3>Variants</h3>
    <ul>
        {% for v in product.variants.all %}
        {% with qty=v.stock.quantity|default:0 %}
        <li>
            {{ v.size|default:"—" }} / {{ v.colour|default:"—" }} — £{{ v.price }}
            {% if v.is_available and qty|add:0 > 0 %}
            <span>(In stock)</span>
            {% else %}
            <span>(Out of stock)</span>
            {% endif %}
        </li>
        {% endwith %}
        {% empty %}
        <li>No variants available.</li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
{% endblock %}